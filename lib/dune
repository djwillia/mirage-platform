(library
  (name oS)
  (public_name mirage-solo5)
  (c_names alloc_pages_stubs atomic_stubs barrier_stubs checksum_stubs clock_stubs cstruct_stubs main mm_stubs solo5_block_stubs solo5_console_stubs solo5_net_stubs)
  (c_flags (:include cflags) -O2 -std=c99 -Wall -Werror)
  (libraries metrics lwt cstruct logs bheap lwt-dllist))

(install
 (section lib)
 (files (mirage-solo5.pc as ../pkgconfig/mirage-solo5.pc)))

(copy_files bindings/*.c)
(rule (copy %{lib:ocaml-freestanding:cflags} cflags))
